packages:
  - A 0.0.1-1;
  - A 1.0.0-1;
  - A 2.0.0-1;
  - A 2.1.0-1;
  - A 3.0.0-1;
  - B 1.0.0-1; depends (A != 2.1.0-1)
  - B 1.2.0-1; depends (A != 2.1.0-1, A >= 1.0, A < 3.0)
  - B 2.0.0-1; depends (A != 2.1.0-1)
  - C 1.0.0-1; depends (B > 2.0.0-1)
  - D 1.0.0-1;
  - E 1.0.0-1; depends (C > 2.0, D < 1.0)
  - F 1.0.0-1;

installed:
  - A 0.0.1-1

modifiers:
  allow_newer:
    - A
  allow_older:
    - B
  allow_any:
    - C
    - D

request:
  - operation: "constrain"
    requirement: "B ^= 1.2.0"
  - operation: "install"
    requirement: "E"
  - operation: "constrain"  # Shouldn't fail because it won't install anything
    requirement: "F > 2.0"

transaction:
  - kind: "remove"
    package: "A 0.0.1-1"
  - kind: "install"
    package: "A 3.0.0-1"
  - kind: "install"
    package: "D 1.0.0-1"
  - kind: "install"
    package: "B 1.2.0-1"
  - kind: "install"
    package: "C 1.0.0-1"
  - kind: "install"
    package: "E 1.0.0-1"

pretty_transaction:
  - kind: "update"
    from: "A 0.0.1-1"
    to: "A 3.0.0-1"
  - kind: "install"
    package: "D 1.0.0-1"
  - kind: "install"
    package: "B 1.2.0-1"
  - kind: "install"
    package: "C 1.0.0-1"
  - kind: "install"
    package: "E 1.0.0-1"
